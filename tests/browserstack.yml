# BrowserStack SDK Configuration
# Docs: https://www.browserstack.com/docs/automate/playwright/getting-started/nodejs/integrate-your-tests

# Credentials via environment variables: BROWSERSTACK_USERNAME and BROWSERSTACK_ACCESS_KEY

framework: playwright

# Combined config for local testing - CI uses separate batch files:
# - browserstack-mobile.yml (iOS devices)
# - browserstack-safari.yml (macOS Safari)
# - browserstack-chrome.yml (Windows Chrome)
#
# NOTE: This config includes both desktop and mobile for local dev testing.
# Mobile Safari has limitations - see browserstack-mobile.yml for details.
platforms:
  # Desktop Safari/WebKit
  - os: osx
    osVersion: Sequoia
    browserName: playwright-webkit
    browserVersion: latest

  # Desktop Chrome
  - os: Windows
    osVersion: "11"
    browserName: playwright-chromium
    browserVersion: latest

# BrowserStack Local - enables testing localhost/internal URLs
# Set to true when testing localhost or internal staging environments
browserstackLocal: true

# Project configuration
projectName: vCluster Documentation
buildName: vCluster Docs Integration Tests

# Parallel execution - run 1 test per platform at a time
# Total concurrency = parallelsPerPlatform Ã— number of platforms
# With 4 platforms and parallelsPerPlatform: 1, max 4 concurrent sessions
# Note: Workflow runs browsers in sequential batches to avoid queue limits
parallelsPerPlatform: 1

# Pin Playwright version to avoid client/server mismatch (ABRUPT_CLOSE errors)
playwrightVersion: '1.latest'

# Session timeouts - prevent "Socket idle" errors
idleTimeout: 300        # 5 min idle timeout (default 90s is too short)
sessionTimeout: 1800    # 30 min max session

# Debugging options
debug: true
visualLogs: true
networkLogs: true
consoleLogs: info
