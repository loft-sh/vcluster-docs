[build]
base = "/"
publish = "public/"
command = """
    set -e
    export NODE_OPTIONS="--max_old_space_size=4096"
    mkdir -p public/
    npm run build
    mv build/ public/docs/
  """

[[redirects]]
  from = "/docs/advanced-topics/*"
  to = "https://www.vcluster.com/docs/v0.19/advanced-topics/:splat"

[[redirects]]
  from = "/docs/architecture/*"
  to = "/docs/vcluster/architecture/"

[[redirects]]
  from = "/docs/cli/*"
  to = "https://www.vcluster.com/docs/v0.19/cli/:splat"

[[redirects]]
  from = "/docs/deploying-vclusters/*"
  to = "https://www.vcluster.com/docs/v0.19/deploying-vclusters/:splat"

[[redirects]]
  from = "/docs/getting-started/*"
  to = "/docs/get-started/"

[[redirects]]
  from = "/docs/licenses/vcluster"
  to = "https://www.vcluster.com/docs/v0.19/licenses/vcluster"

[[redirects]]
  from = "/docs/networking/*"
  to = "https://www.vcluster.com/docs/v0.19/networking/:splat"

[[redirects]]
  from = "/docs/o11y/*"
  to = "https://www.vcluster.com/docs/v0.19/o11y/:splat"

[[redirects]]
  from = "/docs/security/*"
  to = "https://www.vcluster.com/docs/v0.19/security/:splat"

[[redirects]]
  from = "/docs/syncer/*"
  to = "https://www.vcluster.com/docs/v0.19/syncer/:splat"

[[redirects]]
  from = "/docs/use-cases/*"
  to = "https://www.vcluster.com/docs/v0.19/use-cases/o11y/:splat"

[[redirects]]
  from = "/docs/using-vclusters/*"
  to = "https://www.vcluster.com/docs/v0.19/using-vclusters/:splat"

[[redirects]]
  from = "/docs/config-reference/"
  to = "/docs/vcluster/vcluster-yaml/"

[[redirects]]
  from = "/docs/storage/"
  to = "https://www.vcluster.com/docs/v0.19/storage/"

[[redirects]]
  from = "/docs/what-are-virtual-clusters/"
  to = "/docs/"

[[redirects]]
  from = "/docs/help&tutorials/*"
  to = "https://www.vcluster.com/docs/v0.19/help&tutorials/:splat"