---
title: v0.20 Migration Guide
sidebar_position: 1
description: How to migrate from pre-v0.20 to v0.20
---
This guide shows you how to upgrade to vCluster v0.20.0. 

[View the release notes](https://github.com/loft-sh/vcluster/releases/tag/v0.20.0-beta.1)

<br></br>
:::warning Beta Release
vCluster v0.20.0 is currently in beta. This version contains most of the major features, but is not yet complete. It is intended to give an early preview and gather feedback from our users. Loft Labs strongly discourages using v0.20.0 in production environments. There will be a GA release after Loft Labs has received input and matured the v0.20 release stream.
:::

## Supported legacy versions

Loft Labs has tested the upgrade path from v0.19.x to v0.20.0 and therefore recommends moving to v0.19.5 before considering an upgrade to v0.20.0.

Upgrades from vCluster versions prior to 0.19.x might work but have not been tested extensively. 

## Before you begin

The required Helm version is >= v.3.10.0.

## Upgrade the CLI

Before upgrading virtual cluster instances, upgrade to the latest version of the vCluster CLI.

```BASH
vcluster upgrade --version v0.20.0-beta.1
```


## Upgrade your vCluster instance

:::warning Downgrading vCluster instances is NOT supported
While downgrading to an older version of the vCluster CLI is supported, you cannot downgrade virtual cluster instances to a prior version of vCluster (for example, from 0.20 back to 0.19). Make sure you have tested the upgrade sufficiently before rolling out this change to critical systems.
:::

As part of the v0.20.0 release, Loft Labs introduced a new `vcluster.yaml` configuration file with a totally new structure meant to replace your existing `values.yaml`. Pre-v0.20.0 `values.yaml` files are not compatible with v0.20.0. You need to convert to the new format in order to upgrade existing virtual clusters.

The v0.20.0 vCluster CLI has been extended to support converting from the old format to the new using `vcluster convert`.

```BASH
Usage:
  vcluster convert config [flags]
Flags:
      --distro string   Kubernetes distro used 
  -f, --file string     Path to the input file
  -h, --help            Help for config
  -o, --output string   Prints the output in the specified format. Allowed values: yaml, json (default "yaml")
```

Convert to the new `vcluster.yaml` configuration file format by running:

```BASH
vcluster convert config --distro KUBERNETES_DISTRO -f VALUES_FILE
```

Replace:

- _`KUBERNETES_DISTRO`_ with your virtual cluster's existing Kubernetes distribution. **You can't change the Kubernetes distribution or backing store during an upgrade**. 
- _`VALUES_FILE`_ with the path to the `values.yaml`file you used to configure your pre-v0.20 vCluster instance.

For example:

```BASH
vcluster convert config --distro k8s -f /my/k8s/values.yaml
```

If you donâ€™t have your configuration values, use Helm to retrieve those for your currently running virtual cluster.

```bash
helm get values VCLUSTER_NAME -n VCLUSTER_NAMESPACE
```

Replace:

- _`VCLUSTER_NAME`_ with the name of your vCluster instance.
- _`VCLUSTER_NAMESPACE`_ with the namespace that vCluster runs in.

This uses `--revision 0` under the hood. Adjust this accordingly to receive the values of your latest revision. 


## How to downgrade the vCluster CLI

Similar to upgrading the CLI, you can go back to a prior vCluster CLI version by running:

```bash
vcluster upgrade --version v0.19.5
```

## Related content

- [Get started](/get-started.mdx) to learn how to use the new config file.
- [vCluster config reference](/vcluster/vcluster-yaml/README.mdx) for configuration details.