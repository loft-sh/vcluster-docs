---
title: v0.20 Migration Guide
sidebar_position: 1
description: How to migrate from pre-v0.20 to v0.20
---
This guide is intended to walk existing vCluster users through the process of upgrading to v0.20.0.

<br></br>
:::warning Beta Release
Please note that 0.20.0 is currently in beta. It’s an early version of vCluster that contains most of the major features, but is not yet complete. It is intended to give an early preview and gather feedback from our users. We strongly discourage using it in production environments. There will be a follow up, general availability release, once we have received input and matured the 0.20 release stream.
:::

## Supported legacy versions
We've tested the upgrade path from v0.19.x to v0.20.0 and therefore recommend moving to this version (0.19.5) before considering an upgrade to v0.20.0.

Upgrades from earlier vCluster versions (prior to 0.19.x) might work, but have not been tested extensively. 

## Prerequisites
Beginning with 0.20.x the required Helm version is >= v.3.10.0

## Upgrading the CLI
Before upgrading virtual cluster instances, first upgrade to the latest version of the vCluster CLI:

```BASH
vcluster upgrade --version v0.20.0-beta.1
```


## vCluster CLI `convert` command

:::warning Downgrading vCluster instances is NOT supported
While downgrading to an older version of the vCluster CLI is supported, you cannot downgrade virtual cluster instances to a prior version of vCluster (i.e. 0.20 back to 0.19). Please make sure you have tested the upgrade sufficiently before rolling out this change to critical systems.
:::

As part of the v0.20.0 release, we introduced a new `vcluster.yaml` configuration file with a totally new structure meant to replace your existing `values.yaml`. Pre-v0.20.0 `values.yaml` are not compatible with v0.20.0 and need to be converted to the new format in order to upgrade existing virtual clusters.

The vcluster CLI in version 0.20.0 has been extended to support converting from the old format to the new:

```BASH
Usage:
  vcluster convert config [flags]
Flags:
      --distro string   Kubernetes distro used 
  -f, --file string     Path to the input file
  -h, --help            Help for config
  -o, --output string   Prints the output in the specified format. Allowed values: yaml, json (default "yaml")
```

Convert to the new `vcluster.yaml` configuration file format easily by running:
```BASH
vcluster convert config --distro k8s -f /my/k8s/values.yaml
```

NOTE: Please make sure to explicitly declare the Kubernetes distribution that the existing virtual cluster is using. The distribution and backend store choices need to be retained and cannot be changed during the upgrade process.

If you don’t have your previously used values at hand anymore. You can use helm to retrieve those for your currently running virtual cluster: `helm -n <VCLUSTER_NAMESPACE> get values <VCLUSTER_NAME>`. This uses `--revision 0` under the hood. Adjust this accordingly to receive the values of the latest revision. 


## How to downgrade the vCluster CLI
Similar to upgrading the CLI, you can go back to a prior vCluster CLI version by running:

```bash
vcluster upgrade --version v0.19.5
```