---
title: Experimental Deploy
sidebar_label: deploy
sidebar_position: 1
description: Configuration for ...
---

import ExperimentalDeploy from '@site/docs/_partials/config/experimental/deploy.mdx'

## Apply manifests on initialization

Apply Kubernetes manifests when the virtual cluster starts. This is useful for configuring internal vCluster resources. For example:

```yaml
deploy:
  manifests: |-
    apiVersion: v1
    kind: Service
    ...
    apiVersion: v1
    kind: ConfigMap
    ...
```

## Apply manifest templates on initialization

Add a manifest template that uses Helm values. For example:

```yaml
deploy:
  manifestsTemplate: |-
    apiVersion: v1
    kind: ConfigMap
    data:
      example: {{ .Release.Name }}
```

## Apply Helm charts on initialization

### Upstream chart

Apply a Helm chart from public and private upstream chart repositories. This example deploys from public and private:

```yaml
deploy:
  helm:
    # public chart
    - chart:
        name: cert-manager
        repo: https://charts.jetstack.io
        version: v1.8.0
      # optional field
      values: |-
        installCRDs: true
      release:
        name: cert-manager
        namespace: cert-manager
    # private chart
    - chart:
        name: my-chart
        repo: https://my-company.com/private-repo/
        version: 1.0
        username: my-username
        password: my-password
      release:
        name: my-release
        namespace: my-release-namespace
```

### Local chart

Apply a chart that exists locally as a compressed `tar` archive. 

```yaml
deploy:
  helm:
    bundle: COMPRESSED_STRING
```

Replace _`COMPRESSED_STRING`_ with a compressed base64 string that has the chart's contents, which are then directly embedded in the vCluster values file.

## Config reference

:::info
The `init.helm[].chart.version` scheme only supports absolute versions and not any constraints.
:::

<ExperimentalDeploy/>