---
title: Nodes
sidebar_label: Nodes
---

By default, vCluster creates fake nodes for every pod `spec.nodeName` it encounters within the virtual cluster. vCluster creates fake nodes because vCluster has no RBAC permissions by default to view the real nodes in the host cluster, as this would need a cluster role and cluster role binding. vCluster also create a fake kubelet endpoint for each node, which forwards requests to the actual node or rewrites requests to preserve virtual cluster names.

## Node syncing modes

vCluster supports multiple modes to customize node syncing behaviour:

- **Pseudo Nodes**: (default) vCluster creates pseudo nodes for each `spec.nodeName` of a pod synced from the virtual cluster. If there are no more pods on a node, vCluster deletes the pseudo node (no cluster role for vCluster is needed).
- **Real Nodes**: vCluster copies and syncs the real node's information for each `spec.nodeName`. If there are no more pods on a node within the virtual cluster, vCluster deleted the virtual cluster node. You must configure [Node synchronization](/vcluster-yaml/sync/from-host/nodes.mdx) for this option to work.
- **Real Nodes All**: vCluster always syncs all nodes from the host cluster to the virtual cluster, no matter where pods are running. This is useful if you want to use a DaemonSet within the virtual cluster. This mode requires following helm values: `.sync.nodes.enabled: true` and `.sync.nodes.syncAllNodes: true`.
- **Real Nodes Label Selector**: vCluster will only sync nodes that match the given label selector. This mode requires following helm values: `.sync.nodes.enabled: true` and `.sync.nodes.nodeSelector: "label1=value1"`. You can also specify `--enforce-node-selector` to enforce scheduling only on these nodes. 
- **Real Nodes + Label Selector**: vCluster will sync nodes that match the given label selector as well as the real nodes information for each `spec.nodeName`. This mode requires following helm values: `.sync.nodes.enabled: true` and `.sync.nodes.nodeSelector: "label1=value1"` and the flag `--enforce-node-selector=false`.

<br/>
:::info DaemonSet Usage
If you want to use a DaemonSet within your virtual cluster, Loft Labs recommends using either the **Real Nodes All** or **Real Nodes Label Selector** option, as these options hard delete the nodes that are not there anymore. If you are using either the **Fake Nodes** or the **Real Nodes** option, a DaemonSet essentially never lets vCluster delete an unused node as it is always occupied by a DaemonSet pod. 
:::


## Related content

[Configure Node synchronization](/vcluster-yaml/sync/from-host/nodes.mdx) from host cluster to virtual cluster.
