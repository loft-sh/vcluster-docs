---
title: Networking
sidebar_label: Networking
---

import NetworkPolicyInfo from '@site/docs/_fragments/network-policy-info.mdx'

<figure>
  <img src="/docs/media/diagrams/vcluster-networking.svg" alt="vCluster Networking" />
  <figcaption>vCluster Networking</figcaption>
</figure>

By default, vCluster synchronized resources such as `Service` and `Ingress` from the virtual cluster to the host cluster in order to enable correct network functionality for the virtual cluster.


## Pod-to-pod traffic

vCluster's [Syncer component](/architecture/syncer.mdx) synchronizes pods, which actually run inside the host namespace of the host cluster. These pods have regular cluster-internal IP addresses and can communicate with each other via IP-based networking.

## Pod-to-service traffic

To allow pods to communicate with services, vCluster synchronizes Service objects, while stripping away unnecessary information from the resource. However, instead of using the DNS names of the services inside the host cluster, the virtual cluster has its own DNS service, which allows the virtual cluster's pods to use much more intuitive DNS mappings, just as in a regular cluster.

## CoreDNS

Each vCluster instance has its own DNS service, which is CoreDNS by default. This allows pods in the virtual cluster to get the IP addresses of services that are also running in the virtual cluster.

The Syncer ensures that the intuitive naming logic of Kubernetes DNS names for services applies and that users can connect to these DNS names, which map to the IP address of the synchronized services that are present in the host cluster.

You cannot directly access host services inside the virtual cluster via DNS. Additionally, host pods can only access virtual cluster services by their synced name. vCluster offers a feature to [sync services](/vcluster-yaml/sync/README.mdx) from the virtual cluster to the host cluster and vice versa.


## Ingress controller traffic

You can enable Ingress resources synchronization, which means you can create an ingress in the virtual cluster to make a service in the virtual cluster available via a hostname/domain. 

However, instead of having to run a separate ingress controller in each virtual cluster, vCluster can sync the ingress resource to the host cluster, which means that the virtual cluster can use a shared ingress controller that is running in the host cluster. This helps share resources across different virtual clusters because otherwise, you would need to install an ingress controller and manually configure DNS for each virtual cluster.

Because the syncer keeps typical SSL provisioning-related annotations for ingresses, you may also set the cert-manager ingress annotations on an ingress in your virtual cluster to use the cert-manager of the underlying host cluster to automatically provision SSL certificates from Let's Encrypt.

## Network policies

Kubernetes has a [NetworkPolicy](https://kubernetes.io/docs/concepts/services-networking/network-policies/) resource type, which enables the creation of rules that govern how pods communicate with each other. By default, vCluster ignores these resources. However, once you enable network policy synchronization, vCluster ensures correct policies are created in the host cluster to achieve the desired traffic behaviour.

<NetworkPolicyInfo/>

## Related content

- [Configure networking](/vcluster-yaml/networking/README.mdx).
- [Configure syncing](/vcluster-yaml/sync/README.mdx).
- [Configure network policies](/vcluster-yaml/policies/README.mdx).
- Configure ingress [from the virtual cluster to the host](/vcluster-yaml/sync/to-host/networking/ingresses.mdx) and [from the host to the virtual cluster](/vcluster-yaml/sync/from-host/ingress-classes.mdx).