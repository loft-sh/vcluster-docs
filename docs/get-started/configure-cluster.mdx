---
title: Configure your virtual cluster
sidebar_label: 2. Configure
sidebar_position: 2
description: Learn how to configure and update your virtual cluster.
---

import VirtualToHost from '@site/docs/_fragments/ingress/virtual-to-host.mdx'
import DeployChangesFrag from '@site/docs/get-started/_fragments/deploy-changes.mdx'

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'


You configure your virtual clusters using the vCluster configuration file called `vcluster.yaml`. This guide includes some examples to illustrate what you can do. See the `vcluster.yaml` [config section](/vcluster-yaml/README.mdx) for detailed configuration options.

## Sync ingress resources

### From host to virtual

If you want to use an ingress controller from the host cluster in your virtual cluster, enable syncing from host to virtual:


```yaml
sync:
  fromHost:
    ingressClasses:
      enabled: true
```

### From virtual to host

<VirtualToHost/>

## Choose a Kubernetes distribution

:::warning 
You cannot change the Kubernetes distro of a deployed virtual cluster. 
:::

vCluster uses [Lightweight Kubernetes (K3s)](https://k3s.io/) by default but supports most Kubernetes distributions. In this example, you enable the vanilla Kubernetes distro. When choosing this option, vCluster deploys a separate etcd cluster, Kubernetes controller manager, and Kubernetes API server alongside the vCluster hypervisor.

```yaml
controlPlane:
  distro:
    k8s:
      enabled: true
```

<DeployChangesFrag/>

## Change Node behavior

In this example, you change the behavior of how vCluster shows nodes inside the virtual cluster.

By default, vCluster creates a [fake node](/architecture/nodes.mdx) for every pod `spec.nodeName` that it encounters within the virtual cluster. The fake node has a different name and made-up spec.

To see real nodes, create a `vcluster.yaml` file with this content:

```yaml
sync:
  fromHost:
    nodes:
      enabled: true
```

This enables you to see the real node names and the real spec of the nodes as they are in the underlying host cluster.

<DeployChangesFrag/>


After updating the virtual cluster, view the nodes again:

`kubectl get nodes`

See the [vcluster.yaml node section](/vcluster-yaml/sync/from-host/nodes.mdx) for a detailed config reference.


## Replicate a host service

In this example, you map a service `my-host-service` in the namespace `my-host-namespace` to the virtual cluster service `my-virtual-service` in the virtual cluster namespace `vcluster-my-vcluster`.

```yaml
replicateServices:
  fromHost:
    - from: my-host-namespace/my-host-service
      to: vcluster-my-vcluster/my-virtual-service
```

<DeployChangesFrag/>

vCluster replicates the service in the virtual cluster and points the virtual cluster service to the host cluster service. Pods inside the virtual cluster can access the host service using `my-virtual-service.my-virtual-namespace` syntax. For example, if you use cURL, the command is `curl http://my-virtual-service.my-virtual-namespace`.

See the `vcluster.yaml` [config section](/vcluster-yaml/networking/replicate-services.mdx) for a detailed config reference.
