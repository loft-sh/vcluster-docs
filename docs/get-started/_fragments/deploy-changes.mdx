import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

Apply your changes:

<Tabs
  groupId="get-started"
  defaultValue="cli"
  values={[
	{ label: "CLI", value: "cli" },
    { label: 'Helm', value: 'helm', },
    { label: 'kubectl', value: 'kubectl', },
    { label: 'Terraform', value: 'terraform', },
    { label: 'Argo CD', value: 'argo', },
    { label: 'Cluster API', value: 'cluster-api', },
  ]
}>
<TabItem value="cli">

```bash
vcluster create --upgrade my-vcluster -n my-vcluster -f vcluster.yaml
```

</TabItem>
<TabItem value="helm">

```bash
helm upgrade --install my-vcluster vcluster \
  --values vcluster.yaml \
  --repo https://charts.loft.sh \
  --namespace my-vcluster \
  --repository-config=''
```

</TabItem>
<TabItem value="kubectl">

```bash
helm template my-vcluster vcluster --repo https://charts.loft.sh -n my-vcluster -f vcluster.yaml | kubectl apply -f -
```

</TabItem>
<TabItem value="terraform">

@TODO Terraform deploy changes

</TabItem>
<TabItem value="argo">

Add your `vcluster.yaml` config file to the `valueFiles` array in your ArgoCD `Application` file. Note that you may use any of the options for passing values covered by the [ArgoCD Helm documentation](https://argo-cd.readthedocs.io/en/stable/user-guide/helm).

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-vcluster
  namespace: argocd
spec:
  project: default
  source:
    chart: vcluster
    repoURL: https://charts.loft.sh
    helm:
      releaseName: my-vcluster
      valueFiles:
        - vcluster.yaml
  destination:
    server: https://kubernetes.default.svc
    namespace: my-vcluster
```

</TabItem>
<TabItem value="cluster-api">

You can apply Cluster API changes by regenerating the cluster custom resource using `clusterctl`:
```bash
export CLUSTER_NAME=my-vcluster
export CLUSTER_NAMESPACE=my-vcluster
export KUBERNETES_VERSION=1.29.3
export HELM_VALUES=$(cat vcluster.yaml)

clusterctl generate cluster ${CLUSTER_NAME} \
    --infrastructure vcluster \
    --kubernetes-version ${KUBERNETES_VERSION} \
    --target-namespace ${CLUSTER_NAMESPACE} | kubectl apply -f -
```

After the changes have been applied, wait for the vCluster custom resource to report a ready status:
```bash
kubectl wait --for=condition=ready vcluster -n $CLUSTER_NAMESPACE $CLUSTER_NAME --timeout=300s
```

</TabItem>
</Tabs>
