---
title: Advanced
sidebar_label: advanced
sidebar_position: 5
description: Configuration for ...
---

import ControlPlaneAdvanced from '@site/docs/_partials/config/controlPlane/advanced.mdx'

`advanced.defaultImageRegistry`:
- existing docs covers this well, however it may be needed to configure the vCluster service account with a pullSecret to use the private registry. See [this issue](https://github.com/loft-sh/vcluster/issues/333)
- multiple default image registries are not supported, and instead users will need to override each image, see [this issue](https://github.com/loft-sh/vcluster/issues/1200)

`advanced.virtualScheduler`:
- [see original docs](https://www.vcluster.com/docs/architecture/scheduling#separate-vcluster-scheduler)

`advanced.serviceAccount`:
- Modifies the vCluster control plane's service account. Reasons to do this:
  - It may need permissions to [pull from a private image registry](https://github.com/loft-sh/vcluster/issues/333).
  - Some cloud providers provide IAM integrations, such as [Google's Workload Identity](https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity) and AWS's [IAM roles for service accounts\(IRSA\)](https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html)
    - These may also be used to provide authn/authz for cloud provider image registries

`advanced.workloadServiceAccount`:
- Similar usage as `serviceAccount`, but for use with workloads deployed to the virtual cluster

`advanced.headlessService`:
- `StatefulSet` pods require a headless service, as described here: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#limitations
- This gives users options to set labels & annotations on this headless service

`advanced.globalMetadata`:
- One possible usage for adding annotations to all the vCluster components via Helm could be annotations based cost tracking
- There are varied reasons for wanting to annotate things. [Kube Janitor](https://codeberg.org/hjacobs/kube-janitor) is another example that's similar to our Sleep Mode

## Config reference

<ControlPlaneAdvanced/>