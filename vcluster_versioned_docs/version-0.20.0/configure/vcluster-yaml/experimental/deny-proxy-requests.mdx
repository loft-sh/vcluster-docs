---
title: Denying Proxy Requests
sidebar_label: denyProxyRequests
sidebar_position: 7
sidebar_class_name: pro
description: Configure vCluster to deny certain requests in the vCluster proxy. PRO feature.
---
import CodeBlock from '@theme/CodeBlock';
import DenyProxyRequestExample from '!!raw-loader!./_code/deny-proxy-config.yaml'
import DenyProxyRequests from '../../../_partials/config/experimental/denyProxyRequests.mdx'
import ProAdmonition from '../../../_partials/admonitions/pro-admonition.mdx'

{/*
- Related Linear Issues:
  - [PRO-348](https://linear.app/loft/issue/PRO-348/vcluster-built-in-or-external-admission-control)
  - [ENG-1315](https://linear.app/loft/issue/ENG-1315/vcluster-pro-admission-control-in-syncer-api-proxy-server)
  - Current implementation differs from what is described in PRO-348
    - Only validation based on matched namespaces, and resource group / kind / version and request verbs are supported
    - certain users can be excluded from validation
    - No mutation of requests, only allow / deny
- looks to have been `checks` previously, configured via environment variable `PROXY_WEBHOOK_CONFIG`
  - I have not been able to find any documentation for usage
  - Old usage found here:
    - [setting PROXY_WEBHOOK_CONFIG](https://github.com/loft-sh/vcluster-pro/blob/65ed57fccbf0851f2e4116cbdaf4c0503eb65db7/devspace_start.sh#L39)
    - [example rules](https://github.com/loft-sh/vcluster-pro/blob/65ed57fccbf0851f2e4116cbdaf4c0503eb65db7/hack/proxy-webhook-config.yaml)
  - New usage would be very similar, but `checks` is now `denyProxyRequests`, and the configuration can be specified in `vcluster.yaml`
*/}

<ProAdmonition/>

Configure denying proxy requests based on rules.

- Only validation based on matched namespaces, and resource group / kind / version and request verbs are supported.
- No mutation of requests, only allow / deny.

## Example

<CodeBlock language="yaml">{DenyProxyRequestExample}</CodeBlock>

## Config reference

<DenyProxyRequests/>
