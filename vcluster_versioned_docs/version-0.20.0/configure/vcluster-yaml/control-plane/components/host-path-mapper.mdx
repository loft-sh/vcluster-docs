---
title: HostPath Mapper
sidebar_label: hostPathMapper
sidebar_position: 5
sidebar_class_name: pro
description: Configure the HostPath Mapper component.
---

import HostPathMapper from '../../../../_partials/config/controlPlane/hostPathMapper.mdx'
import ProAdmonition from '../../../../_partials/admonitions/pro-admonition.mdx'

<ProAdmonition/>

Virtual cluster internal logging relies on a separate component called the [HostPath Mapper](https://github.com/loft-sh/vcluster-hostpath-mapper). This component resolves the virtual pod and container names to their physical counterparts.

If you don't map host paths, logs for vCluster pods are incorrectly resolved by log collectors such as Loki, ELK, and Fluentd.

## vCluster open source

### Enabling the HostPath Mapper
Set `enabled: true` in the vCluster config to allow it to use the hostpath mapper daemonset, which we will create in the next step.
```
controlPlane:
  hostPathMapper:
    enabled: true
```

### Deploy the Hostpath Mapper Daemonset
Now that the vCluster itself is ready, the hostpath mapper component can be deployed. We need the following 2 pieces of information for this:
* The Hostpath Mapper has to be deployed in the same namespace as the target vCluster
* We need to set the `.Values.VclusterReleaseName` value when deploying this helm chart equal to the name of the target vCluster

For example if your vCluster is named `my-vcluster` and is deployed in namespace `my-namespace` then you should run
```
helm install vcluster-hpm vcluster-hpm \
    --repo https://charts.loft.sh \
    -n my-namespace \
    --set VclusterReleaseName=my-vcluster
```

Once deployed successfully a new Daemonset component of the hostpath mapper would start running on every node used by the vCluster workloads.

## vCluster pro

The Centralized HostPath Mapper feature supports the following use cases in the virtual cluster:

- Container-based logging used by tools such as fluentd and Logstash.
- Pod-based logging used by Grafana Loki.
- Velero restic backups.
- KubeVirt workloads.

For details on configuring the vCluster and installing the Central HostPath Mapper, refer to the [central-hostpath-mapper](../../../../../platform/administer/monitoring/central-hostpath-mapper/) page under the platform documentation.

## Config reference

<HostPathMapper/>
