### Last activity update interval

The platform periodically checks for activity to determine when an environment should enter or remain in auto sleep.
This check interval—called the **Auto Sleep Last Activity Update Interval**—defines how often the platform updates the "last active" timestamp for each environment.

By default, the interval is **5 minutes**, meaning that the inactivity timeout will only be reset if it occurs more than 5 minutes after the previous update.

You can customize this interval by setting the platform environment variable `SLEEP_MODE_LAST_ACTIVITY_UPDATE_INTERVAL` via the `vCluster-platform` chart Helm values:

```yaml
env:
  SLEEP_MODE_LAST_ACTIVITY_UPDATE_INTERVAL: "1m"
```

### Virtual cluster Kubernetes API requests

All virtual cluster Kubernetes API requests that are made through the platform count as activity in the {props.name}.

```mermaid
flowchart LR;
  kubectl("<code>$ kubectl get pod my-pod</code>") --> Platform

  Platform("vCluster Platform")

  Platform --> Cluster("Connected Cluster <br/> Kubernetes API Server")
  Cluster --> Pod("<div style='text-align:left; margin:0px;'>apiVersion:&nbsp;v1<br/>kind: Pod<br/>metadata:<br/>&nbsp;&nbsp;name: my-pod<br/></div>")
```

If your kube-context points to the platform's API server as a proxy before the actual connected cluster's API server, every `kubectl` request will be an activity and reset the inactivity timeout.

### Ingress Requests

For [ingress-nginx](https://github.com/kubernetes/ingress-nginx/tree/main) (deprecated) based Ingresses and [Istio](https://istio.io/) Gateways, activity detection works automatically.
For nginx based ingresses, the platform adds the [mirror-target](https://github.com/kubernetes/ingress-nginx/blob/main/docs/user-guide/nginx-configuration/annotations.md#mirror) annotation to each ingress that will track activity and reset the timer when a request is made to that ingress.
For Istio, the metrics from the istio-proxy container are used to determine activity.

<br></br>

:::info Ingress Wakeup

vCluster Platform supports waking up a {props.name} through an ingress independent of the underlying ingress controller. Just navigate to the ingress host and you should see a wakeup page for the {props.name}.

:::
