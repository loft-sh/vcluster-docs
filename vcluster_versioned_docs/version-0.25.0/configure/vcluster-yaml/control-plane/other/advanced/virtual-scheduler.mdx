---
title: Virtual scheduler
sidebar_label: virtualScheduler
sidebar_position: 3
description: Configure virtual scheduling.
---

import VirtualSchedulerConfig from '../../../../../_partials/config/controlPlane/advanced/virtualScheduler.mdx'

By default, vCluster reuses the host cluster scheduler to schedule workloads. This conserves compute resources, but also has some limitations:

1. Labeling nodes inside the virtual cluster has **no effect** on scheduling unless [node syncing from the host](../../../sync/from-host/nodes) is enabled using `sync.fromHost.nodes.enabled: true`.
2. Draining or tainting nodes inside the virtual cluster does **not** affect scheduling.
3. You cannot use custom schedulers inside the virtual cluster.

<!-- vale off -->
If you also [sync PersistentVolumeClaim resources](../../../sync/to-host/storage/persistent-volume-claims.mdx), vCluster mirrors the related `CSIDriver`, `CSINode`, and `CSIStorageCapacity` objects into the virtual cluster. This allows the virtual scheduler to make storage-aware scheduling decisions.

In some cases, you might want to label or taint nodes inside the virtual cluster to influence scheduling decisions—for example, using [node affinity](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity) or [topology spread constraints](https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/).


To support these use cases, vCluster allows you to run a scheduler inside the virtual cluster instead of reusing the host cluster’s scheduler.

## Enable the virtual scheduler

To use the virtual scheduler, you must enable with `sync.fromHost.nodes.enabled: true`.

When the virtual scheduler is enabled:

- vCluster only syncs pods that already have a node assigned in the host cluster.
- You can label and taint nodes within the virtual cluster without affecting the host cluster.

Configure your `vcluster.yaml` to sync nodes from the host cluster:

```yaml
sync:
  fromHost:
    nodes:
      enabled: true
```

This setting makes host cluster nodes available inside the virtual cluster, allowing the virtual scheduler to make scheduling decisions based on node labels and taints.
<!-- vale on -->

## Automatically enable sync features

Enabling the virtual scheduler also enables syncing for the following resources:

- [CSI drivers](../../../sync/from-host/csi-drivers.mdx)
- [CSI nodes](../../..//sync/from-host/csi-nodes.mdx)
- [CSI storage capacities](../../../sync/from-host/csi-storage-capacities.mdx)

Manually disabling these features might result in incorrect pod scheduling behavior.

<br/>
:::info
If you also [sync PersistentVolumeClaim resources](../../../sync/to-host/storage/persistent-volume-claims.mdx), vCluster mirrors the related `CSIDriver`, `CSINode`, and `CSIStorageCapacity` objects into the virtual cluster. This allows the virtual scheduler to make storage-aware scheduling decisions.
:::

## Config reference

<VirtualSchedulerConfig/>

## Related content

- [Sync persistentVolumeClaims](../../../sync/to-host/storage/persistent-volume-claims.mdx)
- [Sync csiStorageCapacities](../../../sync/from-host/csi-storage-capacities.mdx)
- [Sync csiNodes](../../../sync/from-host/csi-nodes.mdx)
- [Sync csiDrivers](../../../sync/from-host/csi-drivers.mdx)
