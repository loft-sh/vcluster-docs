import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';



## Version matrix for embedded etcd and vCluster

| vCluster Version | etcd Version |
|------------------|--------------|
| v0.26.4          | v3.5.21      |
| v0.26.5          | v3.5.25      |
| v0.27.2          | v3.5.21      |
| v0.27.3          | v3.5.25      |
| v0.28.1          | v3.5.21      |
| v0.28.2          | v3.5.25      |
| v0.29.*+         | v3.6.*       |

**Important**: Before upgrading, read the [etcd blog post about upgrading from 3.5 to 3.6](https://etcd.io/blog/2025/upgrade_from_3.5_to_3.6_issue_followup/).

<Tabs>
  <TabItem value="embedded" label="Embedded etcd">

    <Tabs>
      <TabItem value="v0.26" label="vCluster v0.26.[0-4]">
        First upgrade to v0.26.5, it uses etcd v3.5.25. Then, your etcd data will be saved in a format compatible with upgrade to v3.6
      </TabItem>
      <TabItem value="v0.27" label="vCluster v0.27.[0-2]">
        First upgrade to v0.27.3, it uses etcd v3.5.25. Then, your etcd data will be saved in a format compatible with upgrade to v3.6
      </TabItem>
      <TabItem value="v0.28" label="vCluster v0.28.[0-1]">
        First upgrade to v0.28.2, it uses etcd v3.5.25. Then, your etcd data will be saved in a format compatible with upgrade to v3.6
      </TabItem>
    </Tabs>

  </TabItem>

  <TabItem value="deploy" label="Deployed etcd">

    Follow the etcd-recommended upgrade path:
    1. **v3.5.21 → v3.5.25**
    2. **v3.5.25 → v3.6.x**

    You may set etcd image tag via:
    ```yaml title="vcluster.yaml"
    controlPlane:
      backingStore:
        etcd:
          deploy:
            statefulSet:
              image:
                registry: quay.io
                repository: coreos/etcd
                tag: v3.5.25
    ```

  </TabItem>

</Tabs>
