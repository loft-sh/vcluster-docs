---
title: Safely upgrade ETCD v3.5 -> v3.6
sidebar_label: Upgrade ETCD to v3.6
sidebar_position: 6
toc_max_heading_level: 3
description: Learn how to upgrade ETCD to v3.6 in your virtual cluster.
---

import EtcdUpgradeGuide from '@site/vcluster/_fragments/safely-upgrade-etcd.mdx'
import BackingStore from '../../../_partials/config/controlPlane/backingStore.mdx'

## Upgrade ETCD from v3.5 to v3.6 in vCluster

In vCluster, etcd can serve as the underlying storage backend, similar to vanilla Kubernetes. Its version can be configured either explicitly via a `controlPlane.backingStore.etcd.deploy.statefulSet.image.tag` section in the `vcluster.yaml` or implicitly derived from the vCluster version. Before upgrading, we recommend taking an etcd snapshot for safety; the procedure is detailed in the [backup documentation](../../../manage/backup-restore.mdx).

etcd has identified and fixed an additional scenario that may cause upgrade failures when moving from etcd v3.5 to v3.6, specifically during rolling replacement upgrades where a new learner may receive an incorrect snapshot from an older member (â‰¤ v3.5.19). This issue, detailed in [issue #20793](https://github.com/etcd-io/etcd/issues/20793), was addressed in etcd v3.5.24 via [PR #20797](https://github.com/etcd-io/etcd/pull/20797). <br/>
The recommended solution is to first upgrade to etcd v3.5.24 (or higher) before proceeding to v3.6. For users on v3.5.20-v3.5.23 from a fresh install, a direct upgrade to v3.6 is safe. <br/>
To safely upgrade etcd in vCluster, continue reading this page for detailed steps.<br/><br/>
For more details, refer to the [etcd upgrade guide](https://etcd.io/docs/latest/upgrades/upgrade_3_6/).

<EtcdUpgradeGuide />

## Config reference

<BackingStore />
