---
title: Nodes from a Shared Host Cluster
sidebar_label: Nodes from a host cluster
sidebar_position: 1
---

When creating a virtual cluster, the default set of worker nodes comes from the host cluster that the vCluster is deployed on. 

:::warning
If you select using nodes from the host cluster, you cannot change the worker node pool after the vCluster is deployed. 
:::

## Understanding how nodes are viewed in vCluster

When running `kubectl get nodes` in the virtual cluster kubecontext, nodes are reported regardless if nodes from the host cluster
are synced or not. 

They only show up as nodes in the virtual cluster when there are pods from the virtual cluster deployed and running on the host cluster.

### Pseudo nodes (Default)

By default, the nodes from the host are not synced from the host cluster to the virtual cluster. Pseudo nodes only have real values for CPU, architecture, and operating system, while everything else is randomly generated. A single pseudo node 
can either represent a single real node on the shared host cluster, or it can represent multiple real nodes. 
 
When you run `kubectl get nodes`, the nodes that are in the output are considered as psuedo nodes. They only show
up as nodes in the virtual cluster when pods are scheduled to the nodes. If there are no more pods on a node, 
vCluster deletes the pseudo node in the virtual cluster.

### Real nodes (Synced from the host cluster) 

If you need to access specific node information or want real node information, you can sync real nodes from the host cluster to the virtual cluster. 
Syncing real nodes requires a cluster role. 

:::info Node IP obfuscation
By default, vCluster obfuscates node IP addresses when syncing real nodes to protect sensitive information. Learn how to [control node IP visibility](../../learn-how-to/worker-nodes/control-node-ip-visibility.mdx) for your use case.
:::

When you run `kubectl get nodes`, the nodes that are in the output are the actual nodes from the host cluster. They only show
up as nodes in the virtual cluster when pods are scheduled to the nodes. If there are no more pods on a node, 
vCluster deletes the node in the virtual cluster.

```yaml
sync:
  fromHost:
    nodes:
      enabled: true
```

Read more about [options when syncing nodes](../../configure/vcluster-yaml/sync/from-host/nodes).

## Set of nodes to deploy workloads to

### All shared nodes

By default, vCluster can access **all** the nodes in the host cluster to deploy pods and resources on. 

#### Sync all real nodes

Sync all real nodes, regardless of whether a virtual cluster pod is running on it or not:

```
sync:
  fromHost:
    nodes:
      enabled: true
      selector:
        all: true
```

### Dedicated nodes

When deploying a vCluster, you can specify the set of worker nodes from the shared host cluster to allow pods and resources to be 
scheduled onto. Set labels on the worker nodes on the shared host cluster before using label selectors to select those nodes. 

Use cases to only select a set of nodes include:
* Restrict vCluster to nodes in a specific region.
* Target nodes with a particular architecture.
* Using only spot or preemptible instances. 
* Prevent vCluster workloads from running on critical infrastructure nodes.

#### Select nodes with a label selector

By adding a label selector in the `vcluster.yaml`, nodes from the host cluster that have the matching labels can be used to schedule pods and resources. 

This can be used for pseudo nodes or real nodes.

**Pseudo Nodes**

```yaml title="Selecting a set of pseudo nodes"
sync:
  fromHost:
    nodes:
      # Pseudo Nodes
      enabled: false
      # Select which nodes the vCluster can see
      selector:
        labels:
          environment: production
          team: backend
```

**Real Nodes**

```yaml title="Selecting a set of real nodes"
sync:
  fromHost:
    nodes:
      # Sync real node information
      enabled: true
      # Select which nodes the vCluster can see
      selector:
        labels:
          environment: production
          team: backend
```