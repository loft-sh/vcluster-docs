---
title: Deploy in rootless mode
sidebar_label: Rootless mode
sidebar_position: 6
---

import ControlPlaneOptions from '../../../../_fragments/deploy/nested/control-plane.mdx'
import WorkerNodeOptions from '../../../../_fragments/deploy/nested/worker-nodes.mdx'
import Deploy from '../../../../_partials/deploy/deploy.mdx'

By default, vCluster deploys the vCluster control plane pod as a root user on the host cluster, but you can adjust vCluster
to deploy on a host cluster as a non-root user. There is no upgrade from a vCluster running as a root user to a vCluster running with a non-root user, so 
this needs to be enabled upon initial deployment. 

## Configure to run as non-root user

You can set the desiured UID for the control plane and deployed CoreDNS pod (if deployed).

```yaml title="Example of non-root user configuration"
controlPlane:
  statefulSet:
    security:
      podSecurityContext:
        fsGroup: 12345
      containerSecurityContext:
        runAsUser: 12345
        runAsNonRoot: true
```

## Other predeployment configuration options

Before deploying, it's recommended to review the set of configuration options that cannot be updated post deployment. These options require deploying a new vCluster instead of upgrading your vCluster with new options.

<ControlPlaneOptions />
<WorkerNodeOptions />

## Deploy vCluster

:::tip YAML configuration
If you're not sure which options to configure, you can update most settings later by upgrading your vCluster with an updated `vcluster.yaml`.
However, some settings — such as what type of worker nodes or the backing store — can only be set during the initial deployment and cannot be changed during an upgrade.
:::

<Deploy />

## Next steps

Now that you have vCluster running, consider exploring the [platform UI](/platform/install/quick-start-guide) to manage your virtual clusters.

