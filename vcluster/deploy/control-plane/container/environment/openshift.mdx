---
title: Deploy on OpenShift
sidebar_label: OpenShift
sidebar_position: 4
id: openshift
---

import WorkerNodeOptions from '../../../../_fragments/deploy/worker-nodes.mdx'
import TopologyOptions from '../../../../_fragments/deploy/topologies.mdx'
import SecurityOptions from '../../../../_fragments/deploy/security.mdx'
import BackingStoreYAMLOptions from '../../../../_fragments/deploy/backing-store.mdx'

import Deploy from '../../../../_partials/deploy/deploy.mdx'

OpenShift imposes restrictions that are not common to other Kubernetes distributions, which requires additional configuration options. 

By default, OpenShift doesn't allow running containers with the root user, but it assigns a random UID from the allowed 
range automatically. vCluster needs to be configured to enable running as a non-root user. 

vCluster requires `create` permission for the `endpoints/restricted` resource in the default group when running on OpenShift.
This permission is required because OpenShift has an additional built-in admission controller for the Endpoint resources, which denies the creation of the endpoints pointing into the cluster network or service network CIDR ranges.
This additional role adds the required permission necessary for certain networking features.

```yaml title="Required OpenShift Configuration Options"
controlPlane:
  statefulSet:
    security:
      podSecurityContext:
        fsGroup: 12345
      containerSecurityContext:
        runAsUser: 12345
        runAsNonRoot: true

rbac:
  role:
    extraRules:
    - apiGroups: [""]
      resources: ["endpoints/restricted"]
      verbs: ["create"]
```

## Main predeployment configuration options

Before deploying, it's recommended to review the set of configuration options that cannot be updated post deployment. These options require deploying a new vCluster instead of upgrading your vCluster with new options.

<WorkerNodeOptions />
<TopologyOptions />
<SecurityOptions />
<BackingStoreYAMLOptions />

## Deploy vCluster on OpenShift

:::tip YAML configuration
If you're not sure which options to configure, you can update most settings later by upgrading your vCluster with an updated `vcluster.yaml`.
However, some settings — such as what type of worker nodes or the backing store — can only be set during the initial deployment and cannot be changed during an upgrade.
:::

<Deploy />

## Next steps

Now that you have vCluster running on OpenShift, consider setting up the [platform UI](/platform/install/quick-start-guide) to mange your virtual clusters.

