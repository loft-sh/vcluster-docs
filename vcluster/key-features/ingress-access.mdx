---
title: Ingress Access
sidebar_label: Ingress Access
sidebar_position: 6
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Flow, { Step } from "@site/src/components/Flow";
import NavStep from "@site/src/components/NavStep";
import Button from "@site/src/components/Button";
import Label from "@site/src/components/Label";
import Expander from "@site/src/components/Expander";

Typically, virtual clusters are accessed via the platform proxy, that is, requests to the
virtual cluster API server, are proxied through the platform itself. This behavior allows for the platform to
act as a single endpoint for all virtual clusters in the platform deployment. Because of this
behavior, the platform is also able to act as a central point of authentication and authorization, and
to log all interactions (if vCluster Platform Auditing is licensed and enabled).

In some situations you may prefer to access a virtual cluster API server directly, that is, not
via the platform proxy. This behavior can be enabled with the virtual cluster `AccessPoint` feature.
Enabling `AccessPoint` on a virtual cluster requires that the host cluster has a valid ingress
controller deployed, and the `Cluster` object has the `loft.sh/ingress-suffix` annotation set
with a valid domain.

The hostname used to access a virtual cluster that has the `AccessPoint` feature enabled, will
be of the following format:

`<VIRTUAL_CLUSTER_INSTANCE_NAME>-<PROJECT_NAME>.<INGRESS_SUFFIX>`

Where the `<VIRTUAL_CLUSTER_INSTANCE_NAME>` is the name of the virtual cluster instance, the
`<PROJECT_NAME>` is the name of the project the virtual cluster instance is created in, and the
`<INGRESS_SUFFIX>` is the value from the `loft.sh/ingress-suffix` annotation on the cluster.

## Enabling Ingress Access when Creating the Virtual Cluster

Enabling the `AccessPoint` feature can be done during virtual cluster creation in the Platform UI.

<Tabs
    defaultValue="ui"
    values={[
        {label: 'Platform UI', value: 'ui'},
    ]}>
    <TabItem value="ui">
      <Flow id="create-vcluster-with-accesspoint">
        <Step>
          From the project drop-down menu (top left corner), select the project you'd like to create the
          virtual cluster in.
        </Step>
        <Step>
          Click on <NavStep>Virtual Clusters</NavStep>.
        </Step>
        <Step>
          Click the <Button>New Virtual Cluster</Button> button.
        </Step>
        <Step>
          Click the <Button>Configure</Button> button to skip selecting a virtual cluster
          template.
        </Step>
        <Step>
          Click the <Label>Advanced Options</Label>.
        </Step>
        <Step>
          Click the <Expander>Ingress Access</Expander> to expand the configuration section.
        </Step>
        <Step>
          Slide the <Label>Enable Ingress Access</Label> slider to enable the ingress action.
        </Step>
        <Step>
          Finish configuring anything else you'd like on your virtual cluster, then
          click the
          <Button>Create Virtual Cluster</Button> button.
        </Step>
      </Flow>
    </TabItem>
<TabItem value="cli">

```bash
vcluster create vcluster-1 --link 'my-issue=https://github.com/kubernetes/kubernetes/pull/1234'
vcluster create vcluster-1 --link 'https://loft.sh'
vcluster create vcluster-1 --link 'my-issue=https://github.com/kubernetes/kubernetes/pull/1234,documentation=https://example.com/docs'
```

</TabItem>
</Tabs>


:::info Virtual Cluster Templates
The `AccessPoint` feature can also be enabled on the template.
:::
