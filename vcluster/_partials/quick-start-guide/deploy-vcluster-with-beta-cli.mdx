import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import Flow, { Step } from "@site/src/components/Flow";
import InstallBetaCLIFragment from '../deploy/install-beta-cli.mdx'



<Flow id="deploy-vcluster">
  <Step>
   Install the vCluster CLI.

   <InstallBetaCLIFragment/>
  </Step>
  <Step>
   **(Optional)** Create a `vcluster.yaml` to configure your vCluster. Various options can be configured before deploying your vCluster, but even without a `vcluster.yaml`, a vCluster can be deployed with the default options. 

   Refer to the `vcluster.yaml` [reference docs](/vcluster/configure/vcluster-yaml/) to explore all configuration options.

   :::tip vcluster.yaml configuration
   If you aren't sure what options you want to configure, you can always upgrade your vCluster after deployment with an updated `vcluster.yaml` to change your configuration. There are some configuration options (e.g. backing store) that can only be defined during deployment and not changed during upgrade. 
   :::

  </Step>
  <Step>
   Deploy vCluster using the vCluster CLI. There are other methods to deploy vCluster, but this is the quickest way to get started!

   <Tabs
   groupId="cli-deploy"
   defaultValue="default"
   values={[
      { label: "Default (No vcluster.yaml)", value: "default" },
      { label: 'With vcluster.yaml', value: 'with-vcluster-yaml', },
   ]
   }>    
   <TabItem value="default">

   ```bash
   vcluster create my-vcluster --namespace team-x
   ```

   </TabItem>
   <TabItem value="with-vcluster-yaml">
   Include your `vcluster.yaml` configuration file.
   
   ```bash
   vcluster create my-vcluster --namespace team-x --values vcluster.yaml
   ```

   </TabItem>
   </Tabs>

   
  </Step>
  <Step>
    Check out the namespaces in your virtual cluster. When the virtual cluster deployment finishes, your kube context is automatically updated to the virtual cluster. When you run `kubectl` commands, it will now be pointed at your virtual cluster instead of the original Kubernetes cluster. 

    ```
    kubectl get namespaces # See the namespaces of your virtual cluster
    ```

  </Step>
</Flow>