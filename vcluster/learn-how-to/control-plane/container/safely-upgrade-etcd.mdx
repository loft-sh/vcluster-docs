---
title: Safely upgrade ETCD v3.5 -> v3.6
sidebar_label: Upgrade ETCD to v3.6
sidebar_position: 6
toc_max_heading_level: 3
description: Learn how to upgrade ETCD to v3.6 in your virtual cluster.
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import BackingStore from '../../../_partials/config/controlPlane/backingStore.mdx'

# Upgrading ETCD from v3.5 to v3.6 in vCluster

In vCluster, etcd serves as the underlying storage backend, similar to vanilla Kubernetes, and its version can be configured either explicitly via a `controlPlane.backingStore.etcd.deploy.statefulSet.image.tag` section in the `vcluster.yaml` or implicitly derived from the vCluster version. Before upgrading, we recommend taking an etcd snapshot for safety; the procedure is detailed in the [backup documentation](../../../manage/backup-restore/backup.mdx).

etcd has identified and fixed an additional scenario that may cause upgrade failures when moving from etcd v3.5 to v3.6, specifically during rolling replacement upgrades where a new learner may receive an incorrect snapshot from an older member (≤ v3.5.19). This issue, detailed in [issue #20793](https://github.com/etcd-io/etcd/issues/20793), was addressed in etcd v3.5.24 via [PR #20797](https://github.com/etcd-io/etcd/pull/20797). <br/>
The recommended solution is to first upgrade to etcd v3.5.24 (or higher) before proceeding to v3.6. For users on v3.5.20-v3.5.23 from a fresh install, a direct upgrade to v3.6 is safe. <br/>
To safely upgrade etcd in vCluster, continue reading this page for detailed steps.<br/><br/>
For more details, refer to the [etcd upgrade guide](https://etcd.io/docs/latest/upgrades/upgrade_3_6/).

<BackingStore />

## ETCD Versions per vCluster Version

| vCluster Version | ETCD Version |
|------------------|--------------|
| v0.26.4          | v3.5.21      |
| v0.26.5          | v3.5.24      |
| v0.27.2          | v3.5.21      |
| v0.27.3          | v3.5.24      |
| v0.28.1          | v3.5.21      |
| v0.28.2          | v3.5.24      |
| v0.29.*+         | v3.6.*       |

**Important**: Before upgrading, read the [ETCD blog post about upgrading from 3.5 to 3.6](https://etcd.io/blog/2025/upgrade_from_3.5_to_3.6_issue_followup/).

<Tabs>
  <TabItem value="embedded" label="Embedded ETCD">

    <Tabs>
      <TabItem value="v0.26" label="vCluster v0.26.[0-4]">
        First upgrade to v0.26.5, it uses ETCD v3.5.24. Then, you can safely upgrade to any version using ETCD v3.6.5
      </TabItem>
      <TabItem value="v0.27" label="vCluster v0.27.[0-2]">
        First upgrade to v0.27.3, it uses ETCD v3.5.24. Then, you can safely upgrade to any version using ETCD v3.6.5
      </TabItem>
      <TabItem value="v0.28" label="vCluster v0.28.[0-1]">
        First upgrade to v0.28.2, it uses ETCD v3.5.24. Then, you can safely upgrade to any version using ETCD v3.6.5
      </TabItem>
    </Tabs>

  </TabItem>

  <TabItem value="deploy" label="Deployed ETCD">

    Follow the ETCD-recommended upgrade path:
    1. **v3.5.21 → v3.5.24**
    2. **v3.5.24 → v3.6.x**

    You may set ETCD image tag via:
    ```yaml title="vcluster.yaml"
    controlPlane:
      backingStore:
        etcd:
          deploy:
            statefulSet:
              image:
                registry: quay.io
                repository: coreos/etcd
                tag: v3.5.24
    ```

  </TabItem>

  <TabItem value="external" label="External ETCD">

    For external ETCD configurations, vCluster does not manage the ETCD deployment. You are responsible for following the [ETCD upgrade procedures](https://etcd.io/docs/v3.6/upgrades/upgrade_3_6/) according to your infrastructure setup.

  </TabItem>
</Tabs>
