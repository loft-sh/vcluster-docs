---
title: External database
sidebar_label: external
sidebar_position: 2
sidebar_class_name: pro
description: Configure an external database as the virtual cluster's backing store.
---

import ConfigReference from '../../../../../../_partials/config/controlPlane/backingStore/database/external.mdx'
import ProAdmonition from '../../../../../../_partials/admonitions/pro-admonition.mdx'

<ProAdmonition/>

Configure this feature if you want to use an external database such as MySQL or PostgreSQL.

```yaml
controlPlane:
  backingStore:
    database:
      external:
        enabled: true
        dataSource: CONNECTION_STRING
        connector: CONNECTOR_STRING
```

## Connector and Data source

There are two mutually exclusive options for using an external backing store.

*dataSource*: Assign a connection string to `dataSource` that the vCluster will use for its control plane backing store.

*connector*: Assign a name of a [connector secret](../../../../../../../../platform/administer/connector/database) that exists in an instance of vCluster platform in the installed namespace. vCluster Platform will use the secret to automatically
provision a separate database within the database server for the vCluster. It will also created a non-privileged user that can only interact with the vCluster's database. The vCluster
will receive a connection string built from the user and database.

|                             | Connector     | DataSource |
| --------------------------- | ------------- | ---------- |
| MySQL Support               | Yes           | Yes        |
| PostresSQL Support          | Not yet       | Yes        |
| Share Across vClusters      | Yes           | No         |
| Automatic DB Cleanup        | Yes           | No         |
| Credential stored in secret | Yes           | No         |

### DataSource Configuration
Replace _`CONNECTION_STRING`_ with the connection string for your database. Examples:
- PostgreSQL: `postgres://username:password@hostname:5432/vcluster-db`.
- MySQL: `mysql://root:password@tcp(192.168.86.9:30360)/vcluster`.

:::warning
After deploying your vCluster, changing the backing store of vCluster is not supported.
:::

### Connector Configuration

Admin must first setup a [database connector secret](../../../../../../../../../platform/administer/connector/database) in vCluster Platform. Your vCluster must have access to the vCluster Platform.

Once the connector secret has been configured, you cann assign the name of the secret to the `connector` field.
:::note
Any vCluster can connect to vCluster platform. This is usually done by configuring a vCluster Platform [API key](../../../../../../configure/vcluster-yaml/external/platform/api-key).
:::

## Config reference

<ConfigReference/>

