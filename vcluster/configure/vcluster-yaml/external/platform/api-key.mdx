---
title: apiKey
sidebar_label: apiKey
sidebar_position: 1
---

import ProAdmonition from '../../../../_partials/admonitions/pro-admonition.mdx'

import ApiKey from '@site/platform/api/_partials/resources/config/external/platform/apiKey.mdx'
import Flow, { Step } from '@site/src/components/Flow';

<ProAdmonition/>

<!--vale off-->

This provides a way to connect directly to the vCluster Platform.

## Connect vCluster to the platform 

You can connect virtual clusters to the platform using a centrally managed API key. 
Use a shared Kubernetes secret to connect a vCluster to the platform. Create the secret in a namespace, then reference it in the `vcluster.yaml` file to enable authentication.  

<Flow>
  <Step title="Create the Secret">
    Create the `vcluster-platform-api-key` secret in the target namespace the vCluster uses:

    ```bash
    kubectl create secret generic vcluster-platform-api-key \
      --from-literal=apiKey=<YOUR_API_KEY> \
      -n some-namespace
    ```

    - Replace `<YOUR_API_KEY>` with your actual platform API key.
  </Step>

  <Step title="Reference the Secret in vcluster.yaml">
    In your `vcluster.yaml` file, reference the secret by namespace and enable RBAC creation:

    ```yaml
    external:
      platform:
        apiKey:
          namespace: some-namespace
          createRBAC: true
    ```

   `createRBAC: true` configures the `Role` and `RoleBinding` resources the vCluster requires to access the secret in some-namespace.
  </Step>

  <Step>
    Any vCluster referencing this secret is now be connected to the platform and can authenticate using the shared API key.
  </Step>

</Flow>

## Example

```
external:
  platform:
    apiKey:
      secretName: # Defaults to vcluster-platform-api-key if undefined
      namespace: # Namespace to search for the secret. If undefined, it searches the namespace that the vCluster is deployed in. If different than the namespace of the vCluster deployment, then vCluster needs access to that namespace.
      createRBAC: # Default enabled to create the necessary RBAC roles and role bindings in order to find the secret

```

## Config reference

<ApiKey />
