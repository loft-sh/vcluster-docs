---
title: Auto delete
sidebar_label: autoDelete
sidebar_position: 3
sidebar_class_name: host-nodes
---

import ProAdmonition from '../../../../_partials/admonitions/pro-admonition.mdx'

import AutoDelete from '@site/platform/api/_partials/resources/config/external/platform/autoDelete.mdx'
import TenancySupport from '../../../../_fragments/tenancy-support.mdx';
import FeatureTable from '@site/src/components/FeatureTable';

<FeatureTable names="auto-delete" />


<TenancySupport hostNodes="true" />
<ProAdmonition/>

Auto-delete automatically removes virtual clusters after a period of inactivity. This helps reduce costs by cleaning up unused development or test environments.

## How it works

When you configure `autoDelete` for a virtual cluster connected to the Platform:

1. The Platform tracks activity (API calls, ingress access) on the virtual cluster
2. After the configured inactivity period, the Platform deletes the VirtualClusterInstance resource
3. What happens next depends on how the virtual cluster was added to the Platform

:::warning Cleanup behavior depends on management mode
- **Platform-managed (`external: false`)**: The Platform deletes both the VirtualClusterInstance and the underlying vCluster resources (Helm release, namespace)
- **Externally managed (`external: true`)**: The Platform only removes the VirtualClusterInstance from Platform tracking. The underlying Helm release and namespace remain and must be cleaned up manually using your original deployment tool (Helm, Argo CD, etc.)

For more information about management modes, see [Add existing virtual clusters](/platform/use-platform/virtual-clusters/add-virtual-clusters#integration-levels).
:::

## Prerequisites

- The virtual cluster must be connected to the Platform. See [Connect to the Platform](./api-key.mdx) for configuration details.
- Auto-delete requires an active Platform agent to track inactivity and trigger deletion.

## Example

```yaml title="vcluster.yaml"
external:
  platform:
    autoDelete:
      # Delete the virtual cluster after 10 minutes of inactivity
      # Value is in seconds
      afterInactivity: 600
```

For longer inactivity periods:

```yaml title="vcluster.yaml - Delete after 24 hours"
external:
  platform:
    autoDelete:
      # 24 hours = 86400 seconds
      afterInactivity: 86400
```

## Config reference

<AutoDelete />

## Related topics

- [Sleep mode](../../sleep-mode.mdx): Scale down workloads instead of deleting
- [Platform auto-delete](/platform/use-platform/virtual-clusters/key-features/sleep-mode#work-with-auto-delete): Configure via Platform UI
- [Add existing virtual clusters](/platform/use-platform/virtual-clusters/add-virtual-clusters): Management modes explained
