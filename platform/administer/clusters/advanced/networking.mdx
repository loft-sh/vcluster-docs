---
title: Networking
sidebar_label: Networking 
description: vCluster requires specific network ports to to be open for communication
---

vCluster Platform uses specific network ports to enable communication between Kubernetes clusters, the platform API, and external services. These ports support API requests, webhook execution, and cost monitoring.

IMPORTANT: If these ports are blocked by firewall rules, some platform features—such as role-based access control (RBAC) enforcement, cost monitoring, or webhook validation—might fail.

## Required open ports

### Connecting Kubernetes to vCluster Platform

Kubernetes must connect to the platform’s API extensions and webhooks to process requests, enforce policies, and perform management operations. The following ports must be open:

| Port | Purpose |
|------|---------|
| `8443` | API service extension (`v1.cluster.loft.sh`) – Enables Kubernetes API integration with vCluster Platform. |
| `9443` | Webhook validation (`loft webhook`) – Validates requests and enforces policies. |
| `9444` | Management API (`v1.management.loft.sh`) – Handles platform-wide administration and cluster management. |

NOTE: In private GKE clusters, Kubernetes control plane and worker nodes may reside in separate subnetworks. You may need to explicitly allow traffic on these ports using a firewall rule.

### Connecting platform to Prometheus

The platform retrieves cost metrics from Prometheus running inside connected clusters. The platform's cost control dashboard uses these metrics to provide insights into resource usage.  

To collect this data, the local cluster agent acts as a proxy between vCluster Platform and Prometheus. This requires an open connection over `TCP port 9090`. If cost metrics are missing or unavailable, verify that the platform can reach Prometheus on this port.


| Port | Purpose |
|------|---------|
| `9090` | Prometheus cost control dashboard metrics – Enables cost monitoring and visualization. |

NOTE: If your environment has strict firewall rules or network policies, you might need to explicitly allow traffic over `TCP 9090` between the platform and Prometheus.

## Firewall rules configuration

If your firewall blocks these ports, you need to create rules to allow required traffic.

### Allow Kubernetes to connect to the Platform

Run the following command to allow Kubernetes to communicate with the platform:

```sh
gcloud compute firewall-rules create allow-k8s-api-to-vcluster-platform \
  --allow tcp:8443,tcp:9443,tcp:9444 \
  --source-ranges=<KUBERNETES_API_IP_RANGE> \
  --target-tags=vcluster-platform
```