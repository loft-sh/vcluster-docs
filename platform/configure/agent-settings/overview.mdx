---
title: "Overview of Agent Settings"
sidebar_label: "Overview"
sidebar_position: 1
---

# Overview
When a **vCluster Platform** is deployed on a host cluster (for example, **Cluster A**), it can act as a centralized control plane. Other host clusters can connect to the vCluster Platform running on Cluster A and be managed by it.

In this architecture:
- **Cluster A** runs the vCluster Platform.
- Other host clusters connect to Cluster A and run the vCluster Platform Agent.
- The Platform coordinates and manages all connected host clusters through their agents.

## Installation Modes

Both **vCluster Platform** and **vCluster Platform Agent** are installed using the same Helm chart: `vcluster-platform`. The installation mode is controlled by the `agentOnly` value:
```yaml
agentOnly: false
# Installs the vCluster Platform (control plane).
agentOnly: true
# Installs the vCluster Platform Agent.
```

## Installing on the primary host cluster

When installing the vCluster Platform on the primary host cluster (for example, Cluster A), set `agentOnly: false` and optionally configure `agentValues`.
For example:
```yaml
agentOnly: false
agentValues: {}
```
The `agentValues` behavior is as follows:
- By default, `agentValues` is an empty list `{}`.
- An empty `agentValues` list means that agents installed on connected host clusters will inherit the same configuration as the platform running on Cluster A.
- You can populate `agentValues` to override the default agent configuration globally for all connected host clusters.

## Installing on managed host clusters

As described above, the vCluster Platform Agent can be installed using the same `vcluster-platform` chart by setting `agentOnly: true`. And the configuration of 
the agent by default will be decided by the configuration of the platform in the primary host cluster and the `agentValues` content.

However, this means that all host clusters connecting to the platform will share the same configuration. If different connected host clusters require different agent configurations, there are two supported approaches.

1. Add the `loft.sh/agent-values` annotation to a specific Cluster resource (via the UI or YAML). This annotation overrides the platform-level `agentValues`. The override applies only to the annotated Cluster. For example:
```yaml
loft.sh/agent-values: |
  replicaCount: 2
  resources:
    limits:
      memory: 2Gi
```
2. When installing the agent directly on a host cluster, you can override values by passing a custom values file to Helm. But first, you should tell vCluster Platform to ignore the agent of the specific cluster by adding annotation:
```
kubectl annotate cluster cluster-B loft.sh/cluster-ignore-agent="true"
```
Then you can set the values through the `--values` flag:
```bash
helm install vcluster-platform vcluster-platform \
  --set agentOnly=true \
  --values custom-values.yaml
```
This approach allows full control over agent configuration at install time for that specific host cluster.

## Retrieve agent values

For a platform instance on host `nimbus.vcluster.cloud` with a connected cluster named `staging`, the following table shows how to retrieve agent values for each tier. Use these endpoints to determine current platform configuration or to layer values instead of overriding them.

You can specify multiple values files:
```bash
--values=https://<platform-config-endpoint> --values=https://<cluster-annotation-endpoint>
```
An [access key](/platform/administer/users-permissions/access-keys#how-access-keys-work) is required for authentication.
<br></br>

<!-- vale off -->
| Host                    | Cluster Name | Source            | Request                                                                                     | Response                                            |
|-------------------------|-----------|----------------------|---------------------------------------------------------------------------------------------|-----------------------------------------------------|
| `nimbus.vcluster.cloud` | `staging` | none                 | `https://nimbus.vcluster.cloud/clusters/staging?token=access-key`                           | Current agent values                                |
| `nimbus.vcluster.cloud` | `staging` | `platform-config`    | `https://nimbus.vcluster.cloud/clusters/staging?token=access-key&source=platform-config`    | Content of `agentValues` section in platform config |
| `nimbus.vcluster.cloud` | `staging` | `cluster-annotation` | `https://nimbus.vcluster.cloud/clusters/staging?token=access-key&source=cluster-annotation` | Value of the `loft.sh/agent-values` annotation on the `Cluster Object` |
<!-- vale on -->