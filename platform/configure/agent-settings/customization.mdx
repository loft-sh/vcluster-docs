---
title: Per-host cluster customization
sidebar_label: Per-Host Cluster Customization
sidebar_position: 2
---

import Flow, { Step } from "@site/src/components/Flow";
import NavStep from "@site/src/components/NavStep";
import Button from "@site/src/components/Button";
import Label from "@site/src/components/Label";
import Input from "@site/src/components/Input";
import Expander from "@site/src/components/Expander";
import InterpolatedCodeBlock from "@site/src/components/InterpolatedCodeBlock";

As described [here](../installation-options/overview#installation-modes), the vCluster Platform Agent can be installed using the same `vcluster-platform` chart by setting `agentOnly: true`. And the configuration of 
the agent by default will be decided by the configuration of the platform in the primary host cluster and the `agentValues` content.

However, this means that all host clusters connecting to the platform will share the same configuration. If different connected host clusters require different agent configurations, there are two supported approaches.

## `loft.sh/agent-values` annotation {#loftsh-annotations}
Add the `loft.sh/agent-values` annotation to a specific Cluster resource (via the UI or YAML). This annotation overrides the platform-level `agentValues`. The override applies only to the annotated Cluster. For example:
  ```yaml
  loft.sh/agent-values: |
    replicaCount: 2
    resources:
      limits:
        memory: 2Gi
  ```
## Override values
When installing the agent directly on a host cluster, you can override values by passing a custom values file to Helm. But first, you should tell vCluster Platform to ignore the agent of the specific cluster by adding annotation:
  ```
  kubectl annotate cluster cluster-B loft.sh/cluster-ignore-agent="true"
  ```
  Then you can set the values through the `--values` flag:
  ```bash
  helm install vcluster-platform vcluster-platform \
    --set agentOnly=true \
    --values custom-values.yaml
  ```
  This approach allows full control over agent configuration at installation time for that specific host cluster.

  You can also update the agent settings in vCluster Platform UI.
  <Flow id="cluster-extravalues-vcluster-platform-agent">
    <Step>
      Go to the <NavStep>Clusters</NavStep> view using the menu on the left.
    </Step>
    <Step>
      Click the drop down arrow next to the cluster name you wish to modify. In
      the drop down menu click the <Label>Edit</Label> button.
    </Step>
    <Step>
      In the drawer that appears from the right, click on the <Label>Agent</Label>{" "}
      configuration pane. Provide the values in the textarea under{" "}
      <Label>Extra Agent Values</Label> in the YAML format.
    </Step>
    <Step>
      Click on the <Button>Save Changes</Button> button.
    </Step>
  </Flow>