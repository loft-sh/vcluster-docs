---
title: Add existing host clusters
sidebar_label: Add Existing Host Clusters
sidebar_position: 3
description: Add externally deployed host clusters to Platform with visibility-only or full management capabilities
---

import PageVariables from '@site/src/components/PageVariables';
import InterpolatedCodeBlock from '@site/src/components/InterpolatedCodeBlock';

You can register existing host clusters to an installed vCluster Platform running in another host cluster.  
This enables centralized management and visibility of virtual clusters running across multiple host clusters from a single Platform deployment.

### Register host cluster with CLI
In the examples below:
- `HOST_CLUSTER_NAME` — The unique identifier of the host cluster to be registered that is used by the vCluster Platform.  
  It is recommended to use the same name as the actual Kubernetes host cluster.
- `DISPLAY_NAME` — The display name shown in the Platform UI.
- `HOST_CLUSTER_CONTEXT` — The Kubernetes context of the host cluster being registered.

<PageVariables HOST_CLUSTER_NAME="cluster-x" HOST_CLUSTER_CONTEXT="cluster-x-context"  DISPLAY_NAME="dev-cluster" />

First, switch to the kubernetes context of the host cluster to be registered:
<InterpolatedCodeBlock
  code={`kubectl config use-context [[GLOBAL:HOST_CLUSTER_CONTEXT]]`}
  language="bash"
/>

Then, install the platform agent through the CLI:

<InterpolatedCodeBlock
  code={`vcluster platform add cluster [[GLOBAL:HOST_CLUSTER_NAME]] \\
    --display-name "[[GLOBAL:DISPLAY_NAME]]"`}
  language="bash"
/>

This will deploy the vCluster Platform agent in the host cluster. By default, `vcluster-platform` namespace will be created if it doesn't exist already and the platform agent pods will be running in this namespace.
You can find more CLI flags information at [CLI documentation](../../../../vcluster/cli/vcluster_platform_add_cluster).

After the command is finished, you can verify the host is registered in the platform by running

<InterpolatedCodeBlock
  code={`vcluster platform list clusters`}
  language="bash"
/>
The expected output will be:
```bash
         CLUSTER      |  AGE
  --------------------+--------
    cluster-a         | 21m
    cluster-x         | 7s
```

### Upgrade platform agent
You can customize the agent installation by specifying the Helm chart and values using CLI flags during registration. For more details, see [CLI documentation](../../../../vcluster/cli/vcluster_platform_add_cluster).
Alternatively, you can upgrade the deployed Platform agent using Helm after registration.

First, use the following command to get the cluster access key for the host cluster in the platform:
<InterpolatedCodeBlock
  code={`vcluster platform get cluster-access-key [[GLOBAL:DISPLAY_NAME]]`}
  language="bash"
/>
:::warning
The cluster access key can only be obtained after the host cluster is registered in the platform.
:::

The expected output would be like:
<InterpolatedCodeBlock
  code={`$ vcluster platform get cluster-access-key [[GLOBAL:HOST_CLUSTER_NAME]]
14:43:35 info vCluster platform host: https://loftg2fei.loft.host
14:43:35 info Access Key: xxxxxxxx`}
  language="bash"
/>
In this example:
- `https://loftg2fei.loft.host` is the Platform URL
- `xxxxxxxx` is the cluster access token
Replace the following `URL` with your platform URL and the `TOKEN` with your cluster access token. Then use the following command to update the deployed platform agent:

<PageVariables URL="https://loftg2fei.loft.host" TOKEN="xxxxxxxx"/>
<InterpolatedCodeBlock
  code={`helm upgrade loft vcluster-platform \\
    --repo https://charts.loft.sh \\
    --install \\
    --create-namespace \\
    --namespace vcluster-platform \\
    --set agentOnly=true \\
    --set url=[[GLOBAL:URL]] \\
    --set token=[[GLOBAL:TOKEN]]
  `}
  language="bash"
/>

:::note
The `--create-namespace` and `--namespace vcluster-platform` will create a `vcluster-platform` namespace if it doesn't exist already and deploy the platform agent pods in this namespace.
Update the values as needed, and make sure to adjust the corresponding default values in the Helm chart as well.
:::

Once the host cluster is connected, you can centrally manage its virtual clusters and configurations through the vCluster Platform UI or CLI.

