---
title: Prevent Deletion
sidebar_label: Prevent Deletion
sidebar_position: 4.4
---

import Button from "@site/src/components/Button";
import Expander from "@site/src/components/Expander";
import Label from "@site/src/components/Label";
import Flow, { Step } from "@site/src/components/Flow";
import NavStep from "@site/src/components/NavStep";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Accidental deletion of virtual clusters is something that can not be reverted. In order to prevent deletion of virtual clusters, a setting can be enabled on the virtual cluster instance. 

:::note
If you want to delete this virtual cluster in the future, you need to remove the label either in the YAML manifest or through the toggle in the UI.
Once you have done this, you can delete the virtual cluster as usual.
:::

<Tabs
  defaultValue="ui"
  values={[
    { label: "Within the UI", value: "ui" },
    { label: "Within the YAML manifest", value: "yaml" },
  ]}
>
<TabItem value="yaml">
  You can prevent virtual cluster deletion, by setting the annotation `loft.sh/non-deletable: "true"` in the YAML manifest of the virtual cluster instance.

```yaml {6}
apiVersion: management.loft.sh/v1
kind: VirtualClusterInstance
metadata:
  name: my-vcluster
  annotations:
    loft.sh/non-deletable: "true"
spec:
  templateRef:
    name: isolated-vcluster
  clusterRef:
    cluster: loft-cluster
```

</TabItem>

<TabItem value="ui">

<Flow id="vcluster-prevent-deletion-ui">
  <Step>
    From the project drop-down menu (top left corner), select the project you'd like to create the
    virtual cluster in.
  </Step>
  <Step>
    Click on <NavStep>Virtual Clusters</NavStep>.
  </Step>
  <Step>
    Click on <Label>Edit</Label> on the virtual cluster that you want to edit.
  </Step>
  <Step>
    Navigate to the <Label>Advanced Options</Label> on the left.
  </Step>
  <Step>
    Select the <Expander>Prevent Deletion</Expander> expander and tick the <Label>Enabled</Label> checkbox.
  </Step>

<Step>
  Click on the <Button>Save Changes</Button> button to save the changes.
</Step>

</Flow>
</TabItem>

</Tabs>


