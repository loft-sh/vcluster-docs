import Flow, { Step } from '@site/src/components/Flow'
import NavStep from '@site/src/components/NavStep'
import Button from '@site/src/components/Button'
import Label from '@site/src/components/Label'
import Input from '@site/src/components/Input'
import Expander from '@site/src/components/Expander'

<Flow id="cluster-connect-cli">
    <Step>
        When connecting a cluster from the vCluster CLI, you will need to provide a name for the cluster. This name will be used for the Cluster resource that gets created in Kubernetes. Optionally, you can use the `display-name` flag to specify a name for this cluster, when it gets displayed under the <NavStep>Clusters</NavStep> view in vCluster Platform.

        ```bash
        vcluster platform add cluster cluster-name --display-name [display-name]
        ```

        The above command automatically installs the [vCluster Platform Agent](/docs/platform/administer/clusters/advanced/agent-config) in the cluster that corresponds to your current Kubernetes context. The host cluster where the vCluster Platform itself is deployed is automatically connected to the platform during installation. Therefore, this command should be executed in a different host cluster from the one where the vCluster Platform is running.

        By default, the `vcluster-platform` namespace is created automatically if it does not already exist on the cluster. The vCluster Platform Agent resources are deployed into this namespace. You can override this behavior by explicitly specifying a different namespace using the `--namespace` flag. If you want to connect a cluster that is not associated with your current Kubernetes context, use the `--context` flag to specify the context of the target cluster. 
        :::info
        For more information about available CLI flags, refer to the [CLI documentation](/docs/vcluster/cli/vcluster_platform_add_cluster).
        :::

        ```bash
        vcluster platform add cluster cluster-name --display-name [display-name] --context [context]
        ```
    </Step>
    <Step>
        You can verify that the cluster is connected to the platform by running:
        ```bash
        vcluster platform list clusters
        ```

        and the expected output would be:
        ```bash
                CLUSTER      |  AGE
        --------------------+--------
            cluster-name      | 7s
        ```
    </Step>
</Flow>